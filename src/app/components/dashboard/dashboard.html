<navbar />
<div class="main-content">
    <div class="container-fluid px-4">
        <!-- Header -->
        <div class="d-none d-md-block mb-4 pt-4">
            <div>
                <h2 class="mb-1">Panel de Control</h2>
                <p class="text-muted mb-0">Bienvenido al sistema de gestión en salud</p>
            </div>
        </div>

        <!-- Error Alert -->
        <div class="alert alert-danger" *ngIf="errorMessage">
            <i class="bi bi-exclamation-triangle me-2"></i>
            <strong>{{ errorMessage }}</strong>
        </div>

        <!-- Loading Spinner -->
        <div *ngIf="loading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <div class="mt-2">Cargando estadísticas...</div>
        </div>

        <!-- Stats -->
        <div class="row g-3 g-md-4 mb-4" *ngIf="!loading">
            <div class="col-6 col-md-4">
                <div class="card stat-card text-center">
                    <div class="card-body">
                        <div class="stat-icon bg-primary bg-opacity-10 text-primary">
                            <i class="bi bi-people"></i>
                        </div>
                        <div class="stat-number">{{ stats.totalPacientes }}</div>
                        <div class="stat-title">Pacientes</div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card stat-card text-center">
                    <div class="card-body">
                        <div class="stat-icon bg-success bg-opacity-10 text-success">
                            <i class="bi bi-person-badge"></i>
                        </div>
                        <div class="stat-number">{{ stats.totalProfesionales }}</div>
                        <div class="stat-title">Profesionales</div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4">
                <div class="card stat-card text-center">
                    <div class="card-body">
                        <div class="stat-icon bg-warning bg-opacity-10 text-warning">
                            <i class="bi bi-calendar-check"></i>
                        </div>
                        <div class="stat-number">{{ stats.totalCitas }}</div>
                        <div class="stat-title">Citas</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Appointments -->
        <div class="card appointments-card" *ngIf="!loading">
            <div class="card-header text-white">
                <h5 class="mb-0"><i class="bi bi-clock-history me-2"></i> Próximas Citas</h5>
            </div>
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>Paciente</th>
                            <th class="d-none d-sm-table-cell">Profesional</th>
                            <th>Fecha</th>
                            <th class="d-none d-md-table-cell">Hora</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="upcomingAppointments.length === 0">
                            <td colspan="5" class="text-center py-4 text-muted">
                                <i class="bi bi-calendar-x fs-3 d-block mb-2"></i>
                                No hay citas próximas programadas
                            </td>
                        </tr>
                        <tr *ngFor="let appointment of upcomingAppointments">
                            <td><strong>{{ appointment.paciente_nombre || '-' }}</strong></td>
                            <td class="d-none d-sm-table-cell">{{ appointment.profesional_nombre || 'Sin asignar' }}</td>
                            <td>{{ formatDate(appointment.fecha_inicio) }}</td>
                            <td class="d-none d-md-table-cell">{{ formatTime(appointment.fecha_inicio) }}</td>
                            <td>
                                <span class="badge" [ngClass]="getEstadoBadgeClass(appointment.estado_id)">
                                    {{ appointment.estado || '-' }}
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>